# Тестовое задание

### Развернуть проект

```bash
git clone git@github.com:BadLame/test_secunda.git
cp .env.example # Копировать .env.example в .env
composer install # Возможно, потребуется использовать версию PHP 8.4

# laravel/sail - библиотека для быстрого разворачивания контейнеров под приложение
alias sail='[ -f sail ] && sh sail || sh vendor/bin/sail'
sail up -d # или docker-compose up -d
sail artisan migrate:fresh --seed # docker-compose exec laravel.test php ...
sail artisan test # Проверить, тесты должны отрабатывать
```

### Авторизация

Ключ AUTH_CODE в `.env` (передаётся в хедере `Authorization: Bearer ...`)

### Документация

http://localhost/docs/api - Там же на любом роуте можно ввести ключ авторизации для теста запросов
`

## PS

`code` направления деятельности - тринслит названия направления, всё в нижнем регистре, вместо пробела - нижнее подчёркивание

## PPS

Знаю про сервис-лейеры, но конкретно для получения данных - ни разу не видел хороших практик, и чтобы где-то они использовались по назначение (заменялись другими источниками данных).\
Если это критично - буду благодарен хоть тонкому намёку, что сделать иначе

___ 

# Черновичёк разработки

## Сущности

- [x] Род деятельности (вкладывается сам в себя с ограничением)
  - Название
  - Парент ид
  - [x] Ограничение до 3 уровня

- [x] Здание
  - Адрес
  - Координаты

- [x] Организация
  - Название
  - Номер телефона (может быть несколько штук)
  - Связь со зданием
  - Связь с деятельностью (множественная)

## Авторизация

- [x] По захардкоженному ключу (через Middleware)

## Роуты

- [x] Информация об организации по ID
- [x] Список зданий в радиусе / прямоугольной области от гео точки
- [x] Список организаций
  - [x] По названию
  - [x] В здании
  - [x] По указанному виду деятельности (Конкретному)
  - [x] По указанному виду деятельности (Конкретному, учитывая дочерние)
  - [x] В радиусе от гео точки
  - [x] В прямоугольной области от гео точки

## Прочее

- [x] Добавить документацию роутов
- [x] Проверить выборку rect для зданий (иногда падают тесты)
  - Использовалась геометрическая (не геодезическая) точка
- [x] Расписать тут что да как
